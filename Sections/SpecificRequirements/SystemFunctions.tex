\subsubsection{User Registration}
Users can subscribe to the system via mobile or web application. In both cases they have to fill a form with their personal data and authorize the recipient to use and process their personal details.
If the user accepts the conditions then he can complete the registration, otherwise it is canceled.
One registered a confirmation the system checks the consistency of the data inserted my the users and if everything is fine a mail is sent to the new registered user.
The registration can be done by the taxi driver and a generic user of the service. Taxi drivers must complete the form with more specific data.

	\subparagraph{Functional requirements}
	\noindent
		\begin{itemize}
			\item  During the registration phase users must chose which kind of account create: user or taxi driver.
			If the account is a user account than users must provide:
			\begin{itemize}
				\item Complete name
				\item Email address
				\item Username
				\item Password
				\item Address
				\item Phone number
			\end{itemize}
			If the account is a taxi driver account, the user must provide the same information of a user account, with in addiction:
			\begin{itemize}
				\item Taxi Licence ID
			\end{itemize}
			\item The username must be an alphabetic string.
			\item The password must be an alphanumeric string with at least a number and a uppercase character.
			\item The password length must be between 8 and 16 characters.
			\item There can not be two accounts with the same e-mail and of the same type (user, taxi).
			\item The username is case-insensitive
		\end{itemize}


\subsubsection{User Login}
Users must be logged in the system to use its services.
On the login process users must chose the type of account (user or taxi), insert the username and the password. If everything is ok then the users are redirected to their homepage.
In the user Login page not registered users can be redirected to the Registration page.

	\subparagraph{Functional requirements}
	\noindent
		\begin{itemize}
			\item In the user field users can insert the email or the username chosen during the registration phase.
			\item If a user makes a mistake inserting the credentials a suggestion field in the page pops up, and can be used to recover the credentials.
			\item After inserting only the password for 3 times, the account freezes and the user receive an email with the instructions to unfreeze the account.
			\item The username field is case insensitive.
			
		\end{itemize}

\subsubsection{User home page}  
After the login users are redirected to their main page. Here they have the possibility to choose different action to do.
They can reset their password, change personal information or delete their account.
If the user in the page is a generic user, he can choose the option of creating a request or a reservation.
If the user is a taxi driver, he can view the pending request sent by the system and accept or decline it.

	\subparagraph{Functional requirements}
	\noindent
		\begin{itemize}
			\item A generic user can:
			\begin{itemize}
				\item Change password.
				\item Change account information.
				\item Delete account.
				\item Make a taxi request.
				\item Make a Reservation.
				\item View the history of all the rides done.
			\end{itemize}
			\item A taxi driver user can:
			\begin{itemize}
				\item Change password.
				\item Change account information.
				\item Delete account.
				\item View the history of all the rides done.
				\item Activate/Deactivate taxi service.
				\item View the pending request.
				\item Track the taxi via GPS.
			\end{itemize}
			
			\item During the password changing phase the old password should provided with the new one.
			\begin{itemize}
				\item The new password must be an alphanumeric string with at least a number and a uppercase character.
				\item The new password length must be between 8 and 16 characters. 
				\item The new password must be different from the old one.
			\end{itemize}
			\item During the account deletion phase, after the confirmation by the user, a mail is sent to him with a link to deactivate the account.
			\item The deletion account function delete the account but keeps the relative user information. The information are kept as history in the DB.
			\item Activate/Deactivate taxi service: the taxi driver use this function to tell the system to activate/deactivate the taxi service adding/removing him from the taxi queues in the city zones.
			\item When the taxi driver receives a request it is displayed in the main page for 1 minute, then it is passed to the next user in the city zone queue.
		\end{itemize}


\subsubsection{Activation/deactivation of the taxi service}
When a taxi driver is in his home page in the application he shall be able to activate or deactivate his taxi service sending a notification to the system.
When the system receives the notification from the user application about activating/deactivating the taxi system, it checks if the GPS installed in the car connected to the account is on. If there are no errors the taxi is put into a taxi zone queue or removed from the queue.
When a taxi driver completes a request, he has to notify the system. The system then insert him at the end of the taxi zone queue where the taxi is in.

	\subparagraph{Functional requirements}
	\noindent
		\begin{itemize}
			\item The activation of the service can occur only if the GPS installed on the car is active, otherwise the taxi driver receives an alert on his application.
			\item If the system can not receive the GPS signal every 5 minutes it sends a notification to the user.
			\item If the system can not receive the GPS signal for more than 20 minutes, the taxi service is deactivated.
			\item The taxi service can be deactivated only if the user isn't taking a request/reservation.
		\end{itemize} 


\subsubsection{Request making}
The user shall be able to make a taxi request from the web application and the mobile application. If the request comes from the web application, the user has to tell to the system the origin of the ride, otherwise the origin is taken using the GPS of the mobile application.
After the user makes the request, he receives a notification from the system with the identifier of the taxi and the possible arrive time of the taxi.
Once the request is sent to the system it has to send it to the first taxi driver available, who can accept or deny the request.

	\subparagraph{Functional requirements}
	\noindent
		\begin{itemize}
			\item If the request is made using the web application, the system shall be provided with the passenger location inserted directly by the user.
			\item If the request is made using the mobile application, the system can use the GPS position to identify the user location.
			\item Is the GPS isn't available, the system tells the passenger to insert the correct origin location for the taxi ride.
			\item If the origin isn't specified (nor from GPS not from the user insertion), the user can not proceed to send the request.
			\item If a request isn't accepted by a taxi driver, it is passed to the next driver in the queue of the city zone.
		\end{itemize}


\subsubsection{Reservation making}
The user shall be able to make a taxi request from the web application and the mobile application. The reservation must contain the origin and the destination of the ride. The user has to specify also the date and hour of the reservation. If the values for the reservation are valid the user can send the request to the system, then he receives a notification with the taxi identifier.

	\subparagraph{Functional requirements}
	\noindent
		\begin{itemize}
			\item The origin and the destination must be valid [View assumptions]. They must me within 10Km from the city boundaries.
			\item If the GPS is available the user can use the current position as origin of the ride.
			\item The date and the time of the reservation must be valid values.
			\item The system doesn't allow reservation after 24 hours from the current system time.
		\end{itemize}


\subsubsection{Taxi driver notification handling}
After a taxi driver activate the taxi service, he can receive a notification request for a taxi ride. He can accept or refuse the request. If the request is accepted he has to go to the origin location indicated in the notification.

	\subparagraph{Functional requirements}
	\noindent
		\begin{itemize}
			\item After the taxi driver receives a notification, if the system doesn't receive an answer within 1 minute, the notification is passed to the following driver in the taxi queue.
			\item If there are no available taxi drivers in a city zone, the system send the notification to the nearest free taxi driver
			\item When the taxi reaches the origin zone, the system asks him to confirm the begin of the ride.
			\item When the taxi reaches the destination zone, the system asks him to confirm the end of the ride.
			\item After the taxi driver confirms the begin of a ride, the system sets his status to 'busy'.
			\item After the taxi driver confirms the end of a ride, the system sets his status to 'available'.
			\item After the ending of a ride, the system stores the data of the ride into the DB.
		\end{itemize}


\subsubsection{Zone queue handling}
The system has to handle the queue of the taxis in the various city zoned. It has to schedule the the request and send them to the right taxi.

	\subparagraph{Functional requirements}
	\noindent
		\begin{itemize}
			\item The queues use the FIFO policy.
			\item When a taxi connects to the system and sets its status to available, the system insert it into a queue.
			\item The queue is identified by the GPS positions of the city zones. So taxi are put in the queues according to their GPS location.
		\end{itemize}

